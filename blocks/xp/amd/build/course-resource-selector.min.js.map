{"version":3,"sources":["../src/course-resource-selector.js"],"names":["define","$","Ajax","ResourceSelector","CourseResourceSelector","container","searchTermFieldNode","prototype","constructor","apply","searchFunction","bind","Object","create","term","call","methodname","args","query","then","results","map","c","_iscourse","name","fullname","subname","shortname","course"],"mappings":"AAwBAA,OAAM,qCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,4BAAxB,CAAD,CAAwD,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAoC,CAO9F,QAASC,CAAAA,CAAT,CAAgCC,CAAhC,CAA2CC,CAA3C,CAAgE,CAC5DH,CAAgB,CAACI,SAAjB,CAA2BC,WAA3B,CAAuCC,KAAvC,CAA6C,IAA7C,CAAmD,CAACJ,CAAD,CAAY,KAAKK,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAZ,CAA4CL,CAA5C,CAAnD,CACH,CAEDF,CAAsB,CAACG,SAAvB,CAAmCK,MAAM,CAACC,MAAP,CAAcV,CAAgB,CAACI,SAA/B,CAAnC,CACAH,CAAsB,CAACG,SAAvB,CAAiCC,WAAjC,CAA+CJ,CAA/C,CAEAA,CAAsB,CAACG,SAAvB,CAAiCG,cAAjC,CAAkD,SAASI,CAAT,CAAe,CAQ7D,MAAOZ,CAAAA,CAAI,CAACa,IAAL,CAPK,CACR,CACIC,UAAU,CAAE,yBADhB,CAEIC,IAAI,CAAE,CAAEC,KAAK,CAAEJ,CAAT,CAFV,CADQ,CAOL,EAAiB,CAAjB,EAAoBK,IAApB,CAAyB,SAASC,CAAT,CAAkB,CAC9C,MAAOA,CAAAA,CAAO,CAACC,GAAR,CAAY,SAASC,CAAT,CAAY,CAC3B,MAAO,CACHC,SAAS,GADN,CAEHC,IAAI,CAAEF,CAAC,CAACG,QAFL,CAGHC,OAAO,CAAEJ,CAAC,CAACK,SAHR,CAIHC,MAAM,CAAEN,CAJL,CAMV,CAPM,CAQV,CATM,CAUV,CAlBD,CAoBA,MAAOlB,CAAAA,CACV,CAnCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Course resource selector.\n *\n * @package    block_xp\n * @copyright  2018 Frédéric Massart\n * @author     Frédéric Massart <fred@branchup.tech>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'block_xp/resource-selector'], function($, Ajax, ResourceSelector) {\n    /**\n     * Course resource selector.\n     *\n     * @param {String|jQuery} container The container of the contents.\n     * @param {jQuery} searchTermFieldNode The input field in which the use searches.\n     */\n    function CourseResourceSelector(container, searchTermFieldNode) {\n        ResourceSelector.prototype.constructor.apply(this, [container, this.searchFunction.bind(this), searchTermFieldNode]);\n    }\n\n    CourseResourceSelector.prototype = Object.create(ResourceSelector.prototype);\n    CourseResourceSelector.prototype.constructor = CourseResourceSelector;\n\n    CourseResourceSelector.prototype.searchFunction = function(term) {\n        var calls = [\n            {\n                methodname: 'block_xp_search_courses',\n                args: { query: term }\n            }\n        ];\n\n        return Ajax.call(calls)[0].then(function(results) {\n            return results.map(function(c) {\n                return {\n                    _iscourse: true,\n                    name: c.fullname,\n                    subname: c.shortname,\n                    course: c\n                };\n            });\n        });\n    };\n\n    return CourseResourceSelector;\n});\n"],"file":"course-resource-selector.min.js"}
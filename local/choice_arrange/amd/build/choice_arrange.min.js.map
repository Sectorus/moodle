{"version":3,"sources":["../src/choice_arrange.js"],"names":["options","moveDown","pos","length","val","document","getElementById","val_below","parseInt","tmp","value","moveUp","val_above","sortValues","values","i","push","sort","filter","a","define","addPositionSelectors","element","iterator","id","includes","up_button","createElement","type","classList","add","style","padding","setAttribute","down_button","getElementsByClassName","appendChild","init","querySelectorAll","Array","prototype","forEach","call","sort_button","div","width"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Adds arrangement tools inside of the edit form of choice modules.\n *\n * @module     choice_arrange/choice_arrange\n * @package    choice_arrange\n * @copyright  2020 Stephan Lorbek\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nvar options = [];\n\nfunction moveDown(pos) {\n  if ((pos + 1) < options.length - 1) {\n    var val = document.getElementById(\"id_option_\" + pos);\n    var increment = pos + 1;\n    var val_below = document.getElementById(\"id_option_\" + parseInt(increment));\n    var tmp = val.value;\n    val.value = val_below.value;\n    val_below.value = tmp;\n  }\n}\n\nfunction moveUp(pos) {\n  if (pos > 0) {\n    var val = document.getElementById(\"id_option_\" + pos);\n    var decrement = pos - 1;\n    var val_above = document.getElementById(\"id_option_\" + parseInt(decrement));\n    var tmp = val.value;\n    val.value = val_above.value;\n    val_above.value = tmp;\n  }\n}\n\nfunction sortValues() {\n  var values = [];\n  for (var i = 0; i < (options.length - 1); i++) {\n    var val = document.getElementById(\"id_option_\" + i).value;\n    if (val){\n      values.push(val);\n    }\n  }\n  values.sort();\n  values = values.filter(a => a !== '');\n  for (var i = 0; i < (options.length - 1); i++) {\n    if (values[i]){\n      document.getElementById(\"id_option_\" + i).value = values[i];\n    }\n  }\n}\n\ndefine(['jquery'], function($) {\n  function addPositionSelectors(element, iterator) {\n    if (!element.id.includes('add')) {\n      var up_button = document.createElement(\"input\");\n      up_button.type = \"button\";\n      up_button.classList.add(\"btn\");\n      up_button.classList.add(\"btn-primary\");\n      up_button.style.padding = \"auto\";\n      up_button.value = \"▲\";\n      up_button.setAttribute(\"onclick\", \"moveUp(\" + iterator + \");\");\n\n      var down_button = document.createElement(\"input\");\n      down_button.type = \"button\";\n      down_button.classList.add(\"btn\");\n      down_button.classList.add(\"btn-primary\");\n      down_button.style.padding = \"auto\";\n      down_button.value = \"▼\";\n      down_button.setAttribute(\"onclick\", \"moveDown(\" + iterator + \");\");\n\n      element.getElementsByClassName('col-md-9')[0].appendChild(up_button);\n      element.getElementsByClassName('col-md-9')[0].appendChild(down_button);\n    }\n  }\n\n  return {\n    init: function() {\n      options = document.querySelectorAll('[id ^= \"fitem_id_option_\"]');\n      Array.prototype.forEach.call(options, addPositionSelectors);\n      var sort_button = document.createElement(\"input\");\n      sort_button.type = \"button\";\n      sort_button.classList.add(\"btn\");\n      sort_button.classList.add(\"btn-primary\");\n      sort_button.style.padding = \"auto\";\n      sort_button.value = \"Sortieren\";\n      sort_button.setAttribute(\"onclick\", \"sortValues();\");\n\n      var div = document.createElement(\"div\");\n      div.style.width = \"10px\";\n      document.getElementById(\"fitem_id_option_add_fields\").getElementsByClassName('col-md-9')[0].appendChild(div);\n      document.getElementById(\"fitem_id_option_add_fields\").getElementsByClassName('col-md-9')[0].appendChild(sort_button);\n    }\n  };\n});\n"],"file":"choice_arrange.min.js"}
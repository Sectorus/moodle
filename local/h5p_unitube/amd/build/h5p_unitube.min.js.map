{"version":3,"sources":["../src/h5p_unitube.js"],"names":["Sleep","milliseconds","Promise","resolve","setTimeout","setHTML","h5p_frame","frameDoc","contentWindow","document","contentDocument","readyState","getElementsByClassName","length","innerHTML","getElementById","addEventListener","alert","value","define","require","$","init","ready"],"mappings":"kYAuBA,QAASA,CAAAA,KAAT,CAAeC,CAAf,CAA6B,CAC5B,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,CAAO,QAAIC,CAAAA,UAAU,CAACD,CAAD,CAAUF,CAAV,CAAd,CAAnB,CACP,C,QAEcI,CAAAA,O,gHAAf,WAAuBC,CAAvB,yFACQC,CADR,CACmBD,CAAS,CAACE,aAAV,CAAwBC,QAAxB,EAAoCH,CAAS,CAACI,eADjE,MAE+B,UAAvB,EAAAH,CAAQ,CAACI,UAAT,EAAwH,CAAnF,CAAAL,CAAS,CAACE,aAAV,CAAwBC,QAAxB,CAAiCG,sBAAjC,CAAwD,gBAAxD,EAA0EC,MAFvH,uBAGyE,WAAhE,QAAON,CAAAA,CAAQ,CAACK,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,CAHhB,kBAIYL,CAAQ,CAACK,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,EACKE,SADL,uNAKAR,CAAS,CAACE,aAAV,CAAwBC,QAAxB,CAAiCM,cAAjC,CAAgD,aAAhD,EAA+DC,gBAA/D,CAAgF,OAAhF,CAAyF,UAAW,CAChGC,KAAK,CAAC,MAAD,CAAL,CACAX,CAAS,CAACE,aAAV,CAAwBC,QAAxB,CAAiCG,sBAAjC,CAAwD,6BAAxD,EAAuF,CAAvF,EAA0FM,KAA1F,CAAkG,YACrG,CAHD,KATZ,gDAgBUlB,CAAAA,KAAK,CAAC,GAAD,CAhBf,QAiBIK,OAAO,CAACC,CAAD,CAAP,CAjBJ,wC,yCAmBAa,OAAM,iCAAC,CAAC,SAAD,CAAY,QAAZ,CAAD,CAAwB,SAAUC,CAAV,CAAmBC,CAAnB,CAAsB,CAClD,MAAO,CACLC,IAAI,4DAAE,6GACItB,CAAAA,KAAK,CAAC,GAAD,CADT,QAEFqB,CAAC,CAACZ,QAAD,CAAD,CAAYc,KAAZ,CAAkB,UAAW,CAC7B,GAAIjB,CAAAA,CAAS,CAAGG,QAAQ,CAACG,sBAAT,CAAgC,mBAAhC,EAAqD,CAArD,CAAhB,CACAP,OAAO,CAACC,CAAD,CACR,CAHC,EAFE,wCAAF,4DADC,CASR,CAVK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Replaces manual video upload with UNITube\n *\n * @module     h5p_unitube/h5p_unitube\n * @package    h5p_unitube\n * @copyright  2020 Stephan Lorbek\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nfunction Sleep(milliseconds) {\n return new Promise(resolve => setTimeout(resolve, milliseconds));\n}\n\nasync function setHTML(h5p_frame) {\n    var frameDoc = h5p_frame.contentWindow.document || h5p_frame.contentDocument;\n    if (frameDoc.readyState == 'complete' || h5p_frame.contentWindow.document.getElementsByClassName('h5p-dialog-box').length > 0) {\n      if(typeof frameDoc.getElementsByClassName('h5p-dialog-box')[0] !== 'undefined') {\n            frameDoc.getElementsByClassName('h5p-dialog-box')[0]\n                .innerHTML = \"<h3>Unitube</h3><div class='h5p-file-drop-upload-inner'>\" +\n                \"<img id='tube_banner' src='https://static.uni-graz.at/typo3conf/ext/unigraz/Resources/\" +\n                \"Public/Icons/UniGraz/Header/universitaet_graz_logo_signet.svg'>\" +\n                \"</div>\";\n            h5p_frame.contentWindow.document.getElementById('tube_banner').addEventListener('click', function() {\n                alert(\"TODO\");\n                h5p_frame.contentWindow.document.getElementsByClassName('h5p-file-url h5peditor-text')[0].value = \"direct.mp4\";\n            }, false);\n            return;\n       }\n    }\n    await Sleep(100);\n    setHTML(h5p_frame);\n}\ndefine(['require', 'jquery'], function (require, $) {\n  return {\n    init: async function() {\n        await Sleep(1000);\n        $(document).ready(function (){\n        var h5p_frame = document.getElementsByClassName('h5p-editor-iframe')[0];\n        setHTML(h5p_frame);\n      });\n    }\n  };\n});\n"],"file":"h5p_unitube.min.js"}